{"version":3,"sources":["programa.js"],"names":["tile","cantidadX","cantidadY","width","height","cantidadImagen","imagenActual","grilla","x","y","document","querySelector","addEventListener","extractFrames","video","createElement","array","canvas","ctx","getContext","pro","initCanvas","e","videoWidth","videoHeight","drawFrame","pause","drawImage","toBlob","saveFrame","innerHTML","currentTime","duration","toFixed","play","blob","push","revokeURL","URL","revokeObjectURL","src","onend","img","i","length","Image","onload","createObjectURL","body","appendChild","muted","files"],"mappings":"AAAA,IAAMA,IAAI,GAAG;AAAEC,EAAAA,SAAS,EAAE,CAAb;AAAgBC,EAAAA,SAAS,EAAE,CAA3B;AAA8BC,EAAAA,KAAK,EAAE,CAArC;AAAwCC,EAAAA,MAAM,EAAE;AAAhD,CAAb;AACA,IAAIC,cAAc,GAAGL,IAAI,CAACC,SAAL,GAAiBD,IAAI,CAACE,SAA3C;AACA,IAAII,YAAY,GAAG,CAAnB;AACA,IAAIC,MAAM,GAAG;AAAEC,EAAAA,CAAC,EAAE,CAAL;AAAQC,EAAAA,CAAC,EAAE;AAAX,CAAb;AAEAC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCC,gBAAhC,CAAiD,QAAjD,EAA2DC,aAA3D,EAA0E,KAA1E,GACA;AACA;;AAEA,SAASA,aAAT,GAAyB;AACvB,MAAIC,KAAK,GAAGJ,QAAQ,CAACK,aAAT,CAAuB,OAAvB,CAAZ,CADuB,CAEvB;;AACA,MAAIC,KAAK,GAAG,EAAZ;AACA,MAAIC,MAAM,GAAGP,QAAQ,CAACK,aAAT,CAAuB,QAAvB,CAAb;AACA,MAAIG,GAAG,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAV;AACA,MAAIC,GAAG,GAAGV,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAV;;AAEA,WAASU,UAAT,CAAoBC,CAApB,EAAuB;AACrBL,IAAAA,MAAM,CAACd,KAAP,GAAe,KAAKoB,UAAL,GAAkB,EAAjC;AACAN,IAAAA,MAAM,CAACb,MAAP,GAAgB,KAAKoB,WAAL,GAAmB,EAAnC,CAFqB,CAGrB;AACA;AACD;;AAED,WAASC,SAAT,CAAmBH,CAAnB,EAAsB;AACpB,SAAKI,KAAL;AACAR,IAAAA,GAAG,CAACS,SAAJ,CAAc,IAAd,EAAoB,CAApB,EAAuB,CAAvB,EAA0BV,MAAM,CAACd,KAAjC,EAAwCc,MAAM,CAACb,MAA/C;AACA;AACJ;AACA;AACA;AACA;;AACIa,IAAAA,MAAM,CAACW,MAAP,CAAcC,SAAd,EAAyB,YAAzB,EAAuC,GAAvC;AACAT,IAAAA,GAAG,CAACU,SAAJ,GAAgB,CAAE,KAAKC,WAAL,GAAmB,KAAKC,QAAzB,GAAqC,GAAtC,EAA2CC,OAA3C,CAAmD,CAAnD,IAAwD,IAAxE;;AACA,QAAI,KAAKF,WAAL,GAAmB,KAAKC,QAA5B,EAAsC;AACpC,WAAKE,IAAL;AACD;AACF;;AAED,WAASL,SAAT,CAAmBM,IAAnB,EAAyB;AACvBnB,IAAAA,KAAK,CAACoB,IAAN,CAAWD,IAAX;AACD;;AAED,WAASE,SAAT,CAAmBf,CAAnB,EAAsB;AACpBgB,IAAAA,GAAG,CAACC,eAAJ,CAAoB,KAAKC,GAAzB;AACD;;AAED,WAASC,KAAT,CAAenB,CAAf,EAAkB;AAChB;AACA;AACAtB,IAAAA,IAAI,CAACG,KAAL,GAAa,KAAKoB,UAAL,GAAkB,CAA/B;AACAvB,IAAAA,IAAI,CAACI,MAAL,GAAc,KAAKoB,WAAL,GAAmB,CAAjC;AACA,QAAIkB,GAAJ,CALgB,CAMhB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3B,KAAK,CAAC4B,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCD,MAAAA,GAAG,GAAG,IAAIG,KAAJ,EAAN;AACAH,MAAAA,GAAG,CAACI,MAAJ,GAAaT,SAAb;AACAK,MAAAA,GAAG,CAACF,GAAJ,GAAUF,GAAG,CAACS,eAAJ,CAAoB/B,KAAK,CAAC2B,CAAD,CAAzB,CAAV,CAHqC,CAIrC;AACA;;AACAjC,MAAAA,QAAQ,CAACsC,IAAT,CAAcC,WAAd,CAA0BP,GAA1B;AACD,KAde,CAehB;;;AACAJ,IAAAA,GAAG,CAACC,eAAJ,CAAoB,KAAKC,GAAzB;AACD;;AAED1B,EAAAA,KAAK,CAACoC,KAAN,GAAc,IAAd;AAEApC,EAAAA,KAAK,CAACF,gBAAN,CAAuB,gBAAvB,EAAyCS,UAAzC,EAAqD,KAArD;AACAP,EAAAA,KAAK,CAACF,gBAAN,CAAuB,YAAvB,EAAqCa,SAArC,EAAgD,KAAhD;AACAX,EAAAA,KAAK,CAACF,gBAAN,CAAuB,OAAvB,EAAgC6B,KAAhC,EAAuC,KAAvC;AAEA3B,EAAAA,KAAK,CAAC0B,GAAN,GAAYF,GAAG,CAACS,eAAJ,CAAoB,KAAKI,KAAL,CAAW,CAAX,CAApB,CAAZ,CA/DuB,CAgEvB;;AACArC,EAAAA,KAAK,CAACoB,IAAN;AACD","file":"programa.ce1febc6.js","sourceRoot":"../src","sourcesContent":["const tile = { cantidadX: 5, cantidadY: 6, width: 0, height: 0 };\nlet cantidadImagen = tile.cantidadX * tile.cantidadY;\nlet imagenActual = 0;\nlet grilla = { x: 0, y: 0 };\n\ndocument.querySelector('input').addEventListener('change', extractFrames, false);\n//const fuente = 'https://juancgonzalez.com/labmoviles/suenos/capa2/tren.mp4';\n//document.fuente.addEventListener('change', extractFrames, false);\n\nfunction extractFrames() {\n  var video = document.createElement('video');\n  //video.src = 'https://juancgonzalez.com/labmoviles/suenos/capa2/tren.mp4';\n  var array = [];\n  var canvas = document.createElement('canvas');\n  var ctx = canvas.getContext('2d');\n  var pro = document.querySelector('#progress');\n\n  function initCanvas(e) {\n    canvas.width = this.videoWidth / 30;\n    canvas.height = this.videoHeight / 30;\n    //canvas.width = window.innerWidth;\n    //canvas.height = window.innerHeight;\n  }\n\n  function drawFrame(e) {\n    this.pause();\n    ctx.drawImage(this, 0, 0, canvas.width, canvas.height);\n    /* \n    this will save as a Blob, less memory consumptive than toDataURL\n    a polyfill can be found at\n    https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob#Polyfill\n    */\n    canvas.toBlob(saveFrame, 'image/jpeg', 0.6);\n    pro.innerHTML = ((this.currentTime / this.duration) * 100).toFixed(2) + ' %';\n    if (this.currentTime < this.duration) {\n      this.play();\n    }\n  }\n\n  function saveFrame(blob) {\n    array.push(blob);\n  }\n\n  function revokeURL(e) {\n    URL.revokeObjectURL(this.src);\n  }\n\n  function onend(e) {\n    // tile.width = Math.ceil(window.innerWidth / tile.cantidadX);\n    //tile.height = Math.ceil(window.innerHeight / tile.cantidadY);\n    tile.width = this.videoWidth / 2;\n    tile.height = this.videoHeight / 2;\n    var img;\n    // do whatever with the frames\n    for (var i = 0; i < array.length; i++) {\n      img = new Image();\n      img.onload = revokeURL;\n      img.src = URL.createObjectURL(array[i]);\n      //img.width = tile.width;\n      //img.height = tile.height;\n      document.body.appendChild(img);\n    }\n    // we don't need the video's objectURL anymore\n    URL.revokeObjectURL(this.src);\n  }\n\n  video.muted = true;\n\n  video.addEventListener('loadedmetadata', initCanvas, false);\n  video.addEventListener('timeupdate', drawFrame, false);\n  video.addEventListener('ended', onend, false);\n\n  video.src = URL.createObjectURL(this.files[0]);\n  //video.src = 'https://juancgonzalez.com/labmoviles/suenos/capa2/tren.mp4';\n  video.play();\n}\n"]}